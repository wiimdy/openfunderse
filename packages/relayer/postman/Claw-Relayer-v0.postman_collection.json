{
  "info": {
    "name": "Claw Relayer v0 (Local)",
    "description": "Relayer/Aggregator v0 API samples for local SQLite testing. Import with the matching environment file.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": {
      "major": 0,
      "minor": 1,
      "patch": 0
    }
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "GET metrics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/metrics",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "metrics"
              ]
            },
            "description": "Expected 200. Returns counters: requests/success/fail/duplicates/onchain submit."
          }
        },
        {
          "name": "GET fund status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "status"
              ]
            },
            "description": "Expected 200. Includes weightedConfig + summary + metrics."
          }
        }
      ]
    },
    {
      "name": "Admin APIs (Session Required)",
      "item": [
        {
          "name": "GET auth session",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/auth/session",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "auth",
                "session"
              ]
            },
            "description": "Check current NextAuth session."
          }
        },
        {
          "name": "POST sync fund by strategy (tx verify)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{strategy_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{strategy_bot_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/sync-by-strategy",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "sync-by-strategy"
              ]
            },
            "description": "Strategy bot syncs already-deployed ClawFundFactory tx into relayer projection.",
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fundId\": \"{{fund_id}}\",\n  \"fundName\": \"OpenClaw Demo Fund\",\n  \"strategyBotId\": \"{{strategy_bot_id}}\",\n  \"strategyBotAddress\": \"{{strategy_bot_address}}\",\n  \"txHash\": \"{{strategy_deploy_tx_hash}}\",\n  \"verifierThresholdWeight\": \"{{verifier_threshold_weight}}\",\n  \"intentThresholdWeight\": \"{{intent_threshold_weight}}\"\n}"
            }
          }
        }
      ]
    },
    {
      "name": "Claim APIs",
      "item": [
        {
          "name": "POST register participant bot (strategy only)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{strategy_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{strategy_bot_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"participant\",\n  \"botId\": \"{{participant_bot_id}}\",\n  \"botAddress\": \"{{participant_address}}\",\n  \"policyUri\": \"ipfs://todo\",\n  \"telegramHandle\": \"@participant_bot\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/bots/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "bots",
                "register"
              ]
            },
            "description": "Only the strategy bot configured for this fund can call this endpoint."
          }
        },
        {
          "name": "GET registered bots (strategy only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "x-bot-id",
                "value": "{{strategy_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{strategy_bot_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/bots/register",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "bots",
                "register"
              ]
            },
            "description": "Only the strategy bot configured for this fund can list bots."
          }
        },
        {
          "name": "POST claims",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{participant_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{participant_bot_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"epochId\": \"{{epoch_id}}\",\n  \"claimPayload\": {\n    \"schemaId\": \"price_signal_v1\",\n    \"sourceType\": \"WEB\",\n    \"sourceRef\": \"https://example.com/tokens/{{token_out}}\",\n    \"selector\": \"$.signal\",\n    \"extracted\": \"BUY\",\n    \"extractedType\": \"string\",\n    \"timestamp\": \"1739940000\",\n    \"responseHash\": \"0xaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n    \"evidenceType\": \"url\",\n    \"evidenceURI\": \"https://example.com/evidence/1\",\n    \"crawler\": \"{{participant_address}}\",\n    \"notes\": \"demo claim\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/claims",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "claims"
              ]
            },
            "description": "Submit canonical claim payload. Expected 200 on first insert, 409 on duplicate."
          }
        },
        {
          "name": "GET claims",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/claims",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "claims"
              ]
            },
            "description": "List claims for the fund. Supports status/epochId/limit/offset query."
          }
        },
        {
          "name": "POST epochs/{epochId}/aggregate",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{strategy_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{strategy_bot_api_key}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/epochs/{{epoch_id}}/aggregate",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "epochs",
                "{{epoch_id}}",
                "aggregate"
              ]
            },
            "description": "Strategy bot only. Aggregates latest participant claims for epoch and persists epochStateHash."
          }
        }
      ]
    },
    {
      "name": "Intent APIs",
      "item": [
        {
          "name": "POST intents/propose",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{strategy_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{strategy_bot_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"intent\": {\n    \"intentVersion\": \"v1\",\n    \"vault\": \"{{vault_address}}\",\n    \"action\": \"BUY\",\n    \"tokenIn\": \"{{token_in}}\",\n    \"tokenOut\": \"{{token_out}}\",\n    \"amountIn\": \"{{intent_amount_in}}\",\n    \"minAmountOut\": \"{{intent_min_amount_out}}\",\n    \"deadline\": \"{{intent_deadline}}\",\n    \"maxSlippageBps\": \"{{intent_max_slippage_bps}}\",\n    \"snapshotHash\": \"{{snapshot_hash}}\"\n  },\n  \"maxNotional\": \"{{intent_max_notional}}\",\n  \"executionRoute\": {\n    \"tokenIn\": \"{{token_in}}\",\n    \"tokenOut\": \"{{token_out}}\",\n    \"quoteAmountOut\": \"{{route_quote_amount_out}}\",\n    \"minAmountOut\": \"{{intent_min_amount_out}}\",\n    \"adapter\": \"{{adapter_address}}\",\n    \"adapterData\": \"{{adapter_data}}\"\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/intents/propose",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "intents",
                "propose"
              ]
            },
            "description": "Strategy bot only. executionRoute is required; server computes allowlistHash for onchain constraints."
          }
        },
        {
          "name": "POST intent attestations/batch (valid signature)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{participant_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{participant_bot_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attestations\": [\n    {\n      \"intentHash\": \"{{intent_hash}}\",\n      \"verifier\": \"{{participant_address}}\",\n      \"expiresAt\": \"{{intent_expires_at}}\",\n      \"nonce\": \"{{intent_nonce}}\",\n      \"signature\": \"{{intent_signature}}\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/intents/attestations/batch",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "intents",
                "attestations",
                "batch"
              ]
            },
            "description": "Expected 200/207 depending on result per attestation item."
          }
        },
        {
          "name": "POST intent attestations/batch (negative: bad signature)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "x-bot-id",
                "value": "{{participant_bot_id}}"
              },
              {
                "key": "x-bot-api-key",
                "value": "{{participant_bot_api_key}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"attestations\": [\n    {\n      \"intentHash\": \"{{intent_hash}}\",\n      \"verifier\": \"{{participant_address}}\",\n      \"expiresAt\": \"{{intent_expires_at}}\",\n      \"nonce\": \"{{intent_nonce}}\",\n      \"signature\": \"0xdeadbeef\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/intents/attestations/batch",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "intents",
                "attestations",
                "batch"
              ]
            },
            "description": "Expected PARTIAL/207 with item-level verification error."
          }
        },
        {
          "name": "GET epochs/latest",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/epochs/latest",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "epochs",
                "latest"
              ]
            },
            "description": "Returns latest epoch state hash and aggregate weights."
          }
        }
      ]
    },
    {
      "name": "Ops / Execution APIs",
      "item": [
        {
          "name": "GET executions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/executions?fundId={{fund_id}}&status={{execution_status}}&limit=20&offset=0",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "executions?fundId={{fund_id}}&status={{execution_status}}&limit=20&offset=0"
              ]
            },
            "description": "Lists execution jobs for approved intents."
          }
        },
        {
          "name": "POST cron execute intents",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "x-cron-secret",
                "value": "{{cron_secret}}",
                "disabled": false
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/cron/execute-intents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "cron",
                "execute-intents"
              ]
            },
            "description": "Runs execution worker batch (use CRON secret when enabled)."
          }
        },
        {
          "name": "GET intent events (SSE)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "text/event-stream"
              },
              {
                "key": "Last-Event-ID",
                "value": "{{last_event_id}}",
                "disabled": true
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/funds/{{fund_id}}/events/intents",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "v1",
                "funds",
                "{{fund_id}}",
                "events",
                "intents"
              ]
            },
            "description": "Server-sent events stream for intent attestation events."
          }
        }
      ]
    }
  ]
}
